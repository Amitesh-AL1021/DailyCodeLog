<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DailyCodeLog ‚Äì Amitesh</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Link to your custom CSS file for background animations -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* Ensure body font consistency, similar to index.html */
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
    }
  </style>
</head>

<body class="text-gray-800 font-sans px-4 py-6 md:px-6 md:py-8 max-w-3xl mx-auto">

  <!-- Header Section - now inside a styled card -->
  <div class="bg-white bg-opacity-80 p-6 rounded-lg shadow-md mb-12">
    <header class="text-center">
      <a href="index.html" class="inline-block">
        <h1 class="text-4xl font-extrabold text-blue-700 hover:text-blue-800 transition-colors duration-200">üìò DailyCodeLog
        </h1>
      </a>
      <p class="text-gray-600 mt-2 text-lg">Tracking my daily DSA journey starting from <strong>14th July 2025</strong>
      </p>
    </header>
  </div>

  <!-- Logs by Day Section - now inside a styled card -->
  <section class="mb-12 bg-white bg-opacity-80 p-6 rounded-lg shadow-md">
    <h2 class="text-3xl font-semibold mb-6 text-gray-700">üìÇ Logs by Day</h2>
    <div id="folder-grid" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-8 gap-4" aria-label="Daily code log folders">
      <div id="loading-message" class="col-span-full text-gray-500 text-lg animate-pulse text-center">Loading daily logs...</div>
    </div>
    <ul id="folder-list" class="hidden"></ul> <!-- Hidden original list, content will be added to grid -->
  </section>

  <!-- Footer (Optional) - You might want to include a footer here for consistency -->
  <footer class="text-center mt-16 text-gray-500 text-sm">
    <p>&copy; <span id="current-year"></span> Amitesh Thakur. All rights reserved.</p>
    <script>
      document.getElementById('current-year').textContent = new Date().getFullYear();
    </script>
  </footer>

  <script>
    const GITHUB_USERNAME = "Amitesh-AL1021";
    const REPO_NAME = "DailyCodeLog";
    const BRANCH = "main"; // Assuming your main branch is named 'main'

    const folderGrid = document.getElementById("folder-grid");
    const loadingMessage = document.getElementById("loading-message");

    async function fetchDayFolders() {
      try {
        const response = await fetch(`https://api.github.com/repos/${GITHUB_USERNAME}/${REPO_NAME}/contents`);

        // Remove loading message after fetch attempt
        if (loadingMessage) {
          loadingMessage.remove();
        }

        if (!response.ok) {
          const errorText = await response.text();
          throw new Error(`Failed to fetch repository contents. Status: ${response.status} - ${errorText}`);
        }

        const data = await response.json();

        // Filter and sort directories starting with "Day" numerically
        const dayFolders = data
          .filter(item => item.type === "dir" && item.name.startsWith("Day"))
          .sort((a, b) => {
            const numA = parseInt(a.name.replace("Day", ""), 10);
            const numB = parseInt(b.name.replace("Day", ""), 10);
            return numA - numB;
          });

        if (dayFolders.length === 0) {
          folderGrid.innerHTML = `<div class="col-span-full text-gray-500 text-lg text-center">No daily logs found. Make sure your 'DayX' folders are directly in the repository root.</div>`;
          return;
        }

        dayFolders.forEach(folder => {
          const folderUrl = `https://github.com/${GITHUB_USERNAME}/${REPO_NAME}/tree/${BRANCH}/${folder.name}`;
          const dayNumber = folder.name.replace("Day", ""); // Extract just the number

          const dayCard = document.createElement("div");
          dayCard.classList.add(
            "bg-blue-50", "p-4", "rounded-lg", "shadow-sm", "hover:shadow-md",
            "hover:bg-blue-100", "transition-all", "duration-200", "text-center",
            "flex", "flex-col", "items-center", "justify-center", "cursor-pointer"
          );
          dayCard.setAttribute("role", "link"); // Indicate it's a link for accessibility
          dayCard.setAttribute("tabindex", "0"); // Make it focusable
          dayCard.onclick = () => window.open(folderUrl, '_blank'); // Open link on click
          dayCard.onkeydown = (event) => { // Handle keyboard navigation for accessibility
            if (event.key === 'Enter' || event.key === ' ') {
              window.open(folderUrl, '_blank');
            }
          };


          dayCard.innerHTML = `
            <span class="text-4xl mb-2">üóìÔ∏è</span>
            <span class="text-xl font-semibold text-blue-700">Day ${dayNumber}</span>
          `;
          folderGrid.appendChild(dayCard);
        });

      } catch (error) {
        // Ensure loading message is removed even on error
        if (loadingMessage) {
          loadingMessage.remove();
        }
        folderGrid.innerHTML = `<div class="col-span-full text-red-600 text-lg bg-red-50 p-3 rounded-md border border-red-200 text-center">Error loading folders: ${error.message}. Please check your GitHub username/repo or API limits.</div>`;
        console.error("Error fetching daily logs:", error);
      }
    }

    fetchDayFolders();
  </script>
</body>

</html>
